machine:
  timezone:
    Australia/Sydney
  environment:
    SQLALCHEMY_DATABASE_URI: postgresql://postgres:@localhost:5432/digitalmarketplace_test
  services:
    - elasticsearch

dependencies:
  override:
    - pip install -r requirements_for_test.txt

test:
  pre:
    - psql -c 'create database digitalmarketplace_test;' -U postgres
  override:
    - ./scripts/run_tests.sh

deployment:
  development:
    branch: master
    commands:
      - ./scripts/ci_deploy.sh

